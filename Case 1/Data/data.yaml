General:
  nTimesteps: 24
  nReprDays: 3
  nYears: 1
  base_year: 2021

ADMM:
  rho_initial: 1.0   # Base value; per-market rhos below drive convergence
  max_iter: 10000    # Increased iterations now that residuals are small
  epsilon: 0.01      # Convergence tolerance
  theta: 1.0

# --- MARKET / COORDINATION PARAMETERS ---
# Note: Different rho values help break coupling between markets
# Electricity and Electricity GC markets are coupled through VRES generators
# Using different rho values allows them to converge independently
# Lower rho for GC markets reduces their sensitivity, allowing base markets to stabilize first
elec_market:
  initial_price: 50.0
  rho_initial: 1.0      # Moderate penalty; avoid overly stiff dynamics
elec_GC_market:
  initial_price: 5.0
  rho_initial: 0.3      # Softer penalty to keep GC market coupled but not dominating
                        # Electricity GC market converges alongside electricity
H2_market:
  initial_price: 0.0
  rho_initial: 0.5      # Gentle penalty so H2 price can move negative without exploding
                        # Encourages, but does not force, H2 market clearing
H2_GC_market:
  initial_price: 50.0
  rho_initial: 0.3      
                        # Slightly higher penalty so H2 GC prices adjust faster toward clearing

# End Product (EP) Coordination
# This acts as the "Fixed Demand" that agents compete to fill.
EP_market:              
  initial_price: 700.0  # High starting shadow price to make EP production attractive
  rho_initial: 3.0      # Stronger penalty so EP price adjusts faster toward market clearing
  Demand_Column: "LOAD_EP"
  Total_Demand: 70.0    # Slightly higher MW demand to require more EP supply overall

# --- AGENTS ---

Power:
  Gen_VRES_01:
    Type: "VRES"
    Capacity: 100.0
    Profile_Column: "SOLAR"
    MarginalCost: 0.0
  Gen_Conv_01:
    Type: "Conventional"
    Capacity: 50.0
    MarginalCost: 60.0
  Cons_Elec_01:
    Type: "Consumer"
    PeakLoad: 40.0
    Load_Column: "LOAD_E"
    A_E: 500.0             # Quadratic utility intercept (typical value)
    B_E: 0.5               # Quadratic utility slope (typical value)

Hydrogen:
  Prod_H2_Green:
    Type: "GreenProducer"
    Capacity_Electrolyzer: 30.0
    Capacity_H2_Output: 20.0
    SpecificConsumption: 1.5
    OperationalCost: 3.0    # lowered to make green H2 slightly cheaper

Hydrogen_Offtaker:
  # 1. ELECTROLYTIC AMMONIA PRODUCER (Green - buys H2, sells EP)
  Offtaker_Green:
    Type: "GreenOfftaker"
    Capacity_H2_In: 20.0
    Capacity_EP_Out: 20.0
    Alpha: 1.0
    ProcessingCost: 7.0     # lowered to make green EP route more competitive

  # 2. GREY AMMONIA PRODUCER (Produces EP via SMR, must buy H2 GCs for 42% mandate)
  Offtaker_Grey:
    Type: "GreyOfftaker"
    Capacity: 25.0         # MW_EP
    MarginalCost: 100.0    # slightly cheaper but still above green fuel+processing
    gamma_NH3: 0.18        # kg H2 per kg NH3 (typical value for SMR-based production)

  # 3. END PRODUCT IMPORTER (High-cost backstop supply for ammonia)
  Offtaker_Import:
    Type: "EPImporter"
    Capacity: 5.0          # further reduced so importer cannot meet total demand
    ImportCost: 1800.0     # very high cost, but still below fixed EP price (2000)

# Electricity GC Demand Agent
Electricity_GC_Demand:
  Demand_GC_Elec_01:
    Type: "GC_Demand"
    PeakLoad: 10.0         # Maximum GC demand
    Load_Column: "LOAD_E"  # Use same profile as electricity demand
    A_GC: 20.0             # Utility function intercept (typical value)
    B_GC: 0.5              # Utility function slope (typical value)

# Elastic End Product Demand Agent
EP_Demand: {}  # disabled elastic EP demand; EP demand is now fixed/inelastic via EP_market